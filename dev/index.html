<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Multilanguage HTTP request code snippet generator."><meta name=author content="Álvaro Mondéjar Rubio"><link href=https://mondeja.github.io/http-request-codegen/dev/ rel=canonical><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-7.1.2"><title>Development - http-request-codegen</title><link rel=stylesheet href=../assets/stylesheets/main.6f955dcd.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ef6f36e2.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../assets/_mkdocstrings.css></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#setup-development-environment class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=http-request-codegen class="md-header__button md-logo" aria-label=http-request-codegen data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> http-request-codegen </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Development </span> </div> </div> </div> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24z"/></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=.. hreflang=en class=md-select__link> English </a> </li> <li class=md-select__item> <a href=../es hreflang=es class=md-select__link> Español </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/mondeja/http-request-codegen/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> http-request-codegen </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=http-request-codegen class="md-nav__button md-logo" aria-label=http-request-codegen data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> http-request-codegen </label> <div class=md-nav__source> <a href=https://github.com/mondeja/http-request-codegen/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> http-request-codegen </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../reference/ class=md-nav__link> Reference </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Development <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Development </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#setup-development-environment class=md-nav__link> Setup development environment </a> </li> <li class=md-nav__item> <a href=#development-commands class=md-nav__link> Development commands </a> <nav class=md-nav aria-label="Development commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#test class=md-nav__link> Test </a> </li> <li class=md-nav__item> <a href=#lint class=md-nav__link> Lint </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#developing-implementations class=md-nav__link> Developing implementations </a> <nav class=md-nav aria-label="Developing implementations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#implementation-arguments class=md-nav__link> Implementation arguments </a> </li> <li class=md-nav__item> <a href=#method-singularities class=md-nav__link> Method singularities </a> <nav class=md-nav aria-label="Method singularities"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#post class=md-nav__link> POST </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#one-line-wrapping-behaviour class=md-nav__link> One line wrapping behaviour </a> </li> <li class=md-nav__item> <a href=#randomizing-values class=md-nav__link> Randomizing values </a> </li> <li class=md-nav__item> <a href=#languageplatform-utilities class=md-nav__link> Language/platform utilities </a> </li> <li class=md-nav__item> <a href=#creating-test-cases class=md-nav__link> Creating test cases </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#setup-development-environment class=md-nav__link> Setup development environment </a> </li> <li class=md-nav__item> <a href=#development-commands class=md-nav__link> Development commands </a> <nav class=md-nav aria-label="Development commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#test class=md-nav__link> Test </a> </li> <li class=md-nav__item> <a href=#lint class=md-nav__link> Lint </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#developing-implementations class=md-nav__link> Developing implementations </a> <nav class=md-nav aria-label="Developing implementations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#implementation-arguments class=md-nav__link> Implementation arguments </a> </li> <li class=md-nav__item> <a href=#method-singularities class=md-nav__link> Method singularities </a> <nav class=md-nav aria-label="Method singularities"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#post class=md-nav__link> POST </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#one-line-wrapping-behaviour class=md-nav__link> One line wrapping behaviour </a> </li> <li class=md-nav__item> <a href=#randomizing-values class=md-nav__link> Randomizing values </a> </li> <li class=md-nav__item> <a href=#languageplatform-utilities class=md-nav__link> Language/platform utilities </a> </li> <li class=md-nav__item> <a href=#creating-test-cases class=md-nav__link> Creating test cases </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/mondeja/http-request-codegen/tree/master/docs/dev.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>Development</h1> <h2 id=setup-development-environment>Setup development environment<a class=headerlink href=#setup-development-environment title="Permanent link">&para;</a></h2> <div class=tabbed-set data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>Linux/MacOS</label><div class=tabbed-content> <div class=tabbed-set data-tabs=2:1><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><label for=__tabbed_2_1>pip + virtualenv</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>git clone https://github.com/mondeja/http-request-codegen.git
python3 -m virtualenv venv
. venv/bin/activate
python3 -m pip install .<span class=o>[</span>dev<span class=o>]</span>
pre-commit install
</code></pre></div> </div> </div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>Windows</label><div class=tabbed-content> <div class=tabbed-set data-tabs=3:1><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><label for=__tabbed_3_1>pip + virtualenv</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>git clone https://github.com/mondeja/http-request-codegen.git
python3 -m virtualenv venv
venv\Scripts\activate.bat
python3 -m pip install .[dev]
pre-commit install
</code></pre></div> </div> </div> </div> </div> <h2 id=development-commands>Development commands<a class=headerlink href=#development-commands title="Permanent link">&para;</a></h2> <h3 id=test>Test<a class=headerlink href=#test title="Permanent link">&para;</a></h3> <div class=tabbed-set data-tabs=4:3><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><label for=__tabbed_4_1>All</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>pytest -sv
</code></pre></div> </div> <input id=__tabbed_4_2 name=__tabbed_4 type=radio><label for=__tabbed_4_2>Coverage</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>pytest -s --cov<span class=o>=</span>http_request_codegen --cov-config<span class=o>=</span>setup.cfg --cov-report<span class=o>=</span>html
</code></pre></div> </div> <input id=__tabbed_4_3 name=__tabbed_4 type=radio><label for=__tabbed_4_3>Doctests</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>pytest -svv --doctest-modules http_request_codegen
</code></pre></div> </div> </div> <h3 id=lint>Lint<a class=headerlink href=#lint title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>pre-commit run --all-files
</code></pre></div> <h2 id=developing-implementations>Developing implementations<a class=headerlink href=#developing-implementations title="Permanent link">&para;</a></h2> <p>To develop an HTTP method function for a library or a program, you need to take in accounts all parameters described in <a href=/reference#generate_http_request_code><code>generate_http_request_code</code></a> function, but not the randomized values passed in <code>parameters</code> argument, because <code>http_request_codegen</code> provides functions that can handle these.</p> <h3 id=implementation-arguments>Implementation arguments<a class=headerlink href=#implementation-arguments title="Permanent link">&para;</a></h3> <p>Each implementation function must contain the following arguments, which are passed from the API function <a href=/reference#generate_http_request_code><code>generate_http_request_code</code></a>, so it's recommended that you familiarize yourself with the arguments of that function before continuing with this guide because they are well documented there:</p> <ul> <li><strong><code>url</code></strong>: unique positional argument of the function, represents the target URL of the request.</li> <li><strong><code>headers</code></strong>: dictionary of headers.</li> <li><strong><code>parameters</code></strong>: list of parameter data objects.</li> <li><strong><code>files</code></strong>: dictionary of files, only passed to POST requests, so this should not be defined as argument is the function implementation's name is different to <code>post</code>.</li> <li><strong><code>wrap</code></strong>: maximum anchor of the rendered code snippet.</li> <li><strong><code>indent</code></strong>: indentation used in the rendered code snippet.</li> <li><strong><code>quote_char</code></strong>: string quotation character.</li> <li><strong><code>setup</code></strong> : code snippet prepended to generated request output.</li> <li><strong><code>teardown</code></strong> : code snippet appended at the end of the generated request output.</li> <li><strong><code>oneline</code></strong>: if enabled, render the code snippet in one line.</li> <li><strong><code>seed</code></strong>: seed used generating random fake values of parameters.</li> <li><strong><code>locale</code></strong>: locale used by <a href=https://faker.readthedocs.io>faker</a> library to localize the faked random values for parameters.</li> </ul> <h3 id=method-singularities>Method singularities<a class=headerlink href=#method-singularities title="Permanent link">&para;</a></h3> <h4 id=post>POST<a class=headerlink href=#post title="Permanent link">&para;</a></h4> <!-- BEGIN INCLUDE ../http_request_codegen/hrc_api.py &lt;!-- start-POST-singularities --&gt; &lt;!-- end-POST-singularities --&gt; --> <p>Most POST methods implementations render their code snippets different, depending on <em>Content-Types</em> header, including by default some of the most used <em>Content-Types</em> header related behaviours:</p> <ul> <li>The default behavior, even if you don't specify it explicitly in the <em>Content-Type</em> header is the generation of an <code>application/x-www-form-urlencoded</code> encoded request.</li> <li>If you want to generate a <code>multipart/form-data</code> encoded request, you need to specify the files to sent using the <code>files</code> argument.</li> <li>If you specifies the <em>Content-Type</em> header <code>application/json</code>, the parameters sent will be adjusted according to the JSON encoded POST request.</li> <li>If you specifies the <em>Content-Type</em> header <code>text/plain</code>, you can only send one parameter and it will be adjusted accordingly following the implementation.</li> </ul> <h3 id=one-line-wrapping-behaviour>One line wrapping behaviour<a class=headerlink href=#one-line-wrapping-behaviour title="Permanent link">&para;</a></h3> <p>The first thing to take in account (and the most complicated one) is the behaviour of wrapping (<code>wrap</code> argument) rendering as if <code>oneline=True</code> is passed. The question is: can a snippet of code be outputted in one line if the estimated length of the request is lower than <code>wrap</code> argument value?</p> <p>For example, Python requests can be rendered using this kind of code, in one line:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>requests</span>

<span class=n>req</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;https://github.com/mondeja/http-request-codegen&#39;</span><span class=p>)</span>
</code></pre></div> <p>...or using multiple lines (<code>wrap</code> is lower than expected length):</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>requests</span>

<span class=n>req</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
  <span class=s1>&#39;https://github.com/mondeja/http-request-codegen&#39;</span>
<span class=p>)</span>
</code></pre></div> <p>Of course, this also affects <code>parameters</code>, <code>headers</code> and <code>kwargs</code>:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>requests</span>

<span class=n>req</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>params</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>},</span> <span class=n>headers</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>})</span>
</code></pre></div> <p>...which can be outputted in multiple lines:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>requests</span>

<span class=n>req</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
    <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
    <span class=n>params</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>},</span>
    <span class=n>headers</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>}</span>
<span class=p>)</span>
</code></pre></div> <p>Since this behaviour can depend both <code>oneline</code> and <code>wrap</code> arguments, the recommended way of implement this is to calculate the length of the expected request inside the code snippet, and, if it is greater or equal to <code>wrap</code> argument, must be rendered as if <code>oneline=True</code>.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>You can see an example of this type of implementation at <code>http_request_codegen.generators.python.requests::get</code> function.</p> </div> <p>But other implementations could be rendered in multiples lines regardless the <code>wrap</code> argument value.</p> <p>For example, the Javascript fetch API implementation will output always a multiline code snippet (unless <code>oneline=True</code> is explicitly defined), because the Javascript Promises writing in single line is not a common syntax and there is a little chance that the generated request could not be wrapped given the default wrap value (80 in this case). The minimum reasonable possible code snippet in one line for Javascript fetch API implementation would be:</p> <div class=highlight><pre><span></span><code><span class=nx>fetch</span><span class=p>(</span><span class=s1>&#39;localhost&#39;</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>response</span><span class=p>)</span> <span class=p>{}).</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>error</span><span class=p>)});</span>
</code></pre></div> <p>...which exceeds the default <code>wrap</code> value length (80). In such type of cases, there is no need of calculate the expected generated code snippet request length before build their output.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>You can see an example of this type of implementation at <code>http_request_codegen.generators.javascript.fetch::get</code> function.</p> </div> <p>In the first case, you need to iterate over <code>parameters</code>, <code>headers</code> and <code>kwargs</code> arguments to compute the expected length, then compare the expected length with <code>wrap</code> argument value and, if it reaches it, define an internal <code>oneline=True</code> like behaviour. In the second, you can assume that the generated code is multiline unless <code>oneline=True</code> is explicitly defined as argument.</p> <h3 id=randomizing-values>Randomizing values<a class=headerlink href=#randomizing-values title="Permanent link">&para;</a></h3> <p>The library provides the functions <a href=/reference#lazy_name_by_parameter><code>lazy_name_by_parameter</code></a> and <a href=/reference#lazy_value_by_parameter><code>lazy_value_by_parameter</code></a> which returns the name and the value of a parameter given a parameter dictionary specification. These must be used to randomize parameters in a unified way across implementations as described in <a href=/reference#generate_http_request_code><code>generate_http_request_code</code></a> function documentation.</p> <h3 id=languageplatform-utilities>Language/platform utilities<a class=headerlink href=#languageplatform-utilities title="Permanent link">&para;</a></h3> <p>You can create an <code>_utils.py</code> module inside a language or platform package to store utilities that could help in the process of building the code snippet, like:</p> <ul> <li>Define default indentation for the language/platform (<code>indent</code> argument).</li> <li>Define default wrapping length value (<code>wrap</code> argument).</li> <li>Define default quotation character/s (<code>quote_char</code> argument).</li> <li>Escape quotes of values (according to given <code>quote_char</code> argument).</li> <li>Create greater level functions of code generation for the language/platform, such as string definitions with wrapping behaviour, dictionary definitions...</li> </ul> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>See current <code>_utils.py</code> modules of <code>generators</code> packages as reference.</p> </div> <h3 id=creating-test-cases>Creating test cases<a class=headerlink href=#creating-test-cases title="Permanent link">&para;</a></h3> <p>Use the script <code>scripts/create-impl-test-cases.py</code> to create possible generated code snippets cases accordingly to combination of arguments. This will help you developing implementations because saves you the need of execute every possible combination of arguments. Use it as follows:</p> <div class=highlight><pre><span></span><code>rm -rf cases <span class=o>&amp;&amp;</span> python3 scripts/create-impl-test-cases.py <span class=se>\</span>
  --language python <span class=se>\</span>
  --implementation requests <span class=se>\</span>
  --method GET <span class=se>\</span>
  --directory cases
</code></pre></div> <p>Previous command will create a <code>cases/</code> directory with a lot of code snippets generated, given the combinations described in <code>tests/combinations.py</code>.</p> <p>When you will have manually revised that all code snippets are generated correctly, you can create a test for the implementation at <code>tests/test_generators/test_&lt;lang&gt;/test_&lt;impl&gt;/test_&lt;impl&gt;.py</code>, placing the <code>cases/</code> directory at <code>tests/test_generators/test_&lt;lang&gt;/test_&lt;impl&gt;/&lt;METHOD&gt;</code>.</p> <p>For example, for Python requests GET method, the test module would be <code>tests/test_generators/test_python/test_requests/test_requests.py</code> and the <code>cases/</code> directory would be placed at <code>tests/test_generators/test_python/test_requests/GET/</code>.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>You can use an already implemented test module as a reference to write the one for the implementation.</p> </div> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../reference/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Reference </div> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020-2021 Álvaro Mondéjar </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script> <script src=../assets/javascripts/bundle.4ea5477f.min.js></script> <script src=../assets/javascripts/relative-material-language-selector.js></script> </body> </html>