<!doctype html><html lang=es class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Multilanguage HTTP request code snippet generator."><meta name=author content="Álvaro Mondéjar Rubio"><link rel=canonical href=https://mondeja.github.io/http-request-codegen/es/dev/index.md><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.2"><title>Desarrollo - http-request-codegen</title><meta name="description" content="Multilanguage HTTP request code snippet generator."><link rel=stylesheet href=../../assets/stylesheets/main.f56500e0.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.2505c338.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/_mkdocstrings.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#preparacion-de-entorno-de-desarrollo class=md-skip> Saltar a contenido </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Cabecera> <a href=../ title=http-request-codegen class="md-header__button md-logo" aria-label=http-request-codegen data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> http-request-codegen </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Desarrollo </span> </div> </div> </div> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label="Seleccionar idioma"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=../.. hreflang=en class=md-select__link> English </a> </li> <li class=md-select__item> <a href=.. hreflang=es class=md-select__link> Español </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Búsqueda placeholder=Búsqueda autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Limpiar aria-label=Limpiar tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Inicializando búsqueda </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/mondeja/http-request-codegen title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> http-request-codegen </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navegación data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../ title=http-request-codegen class="md-nav__button md-logo" aria-label=http-request-codegen data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> http-request-codegen </label> <div class=md-nav__source> <a href=https://github.com/mondeja/http-request-codegen title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> http-request-codegen </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Introducción </a> </li> <li class=md-nav__item> <a href=../reference/ class=md-nav__link> Referencia </a> </li> <li class=md-nav__item> <a href=./ class=md-nav__link> Desarrollo </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#preparacion-de-entorno-de-desarrollo class=md-nav__link> Preparación de entorno de desarrollo </a> </li> <li class=md-nav__item> <a href=#comandos-de-desarrollo class=md-nav__link> Comandos de desarrollo </a> <nav class=md-nav aria-label="Comandos de desarrollo"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#testeo class=md-nav__link> Testeo </a> </li> <li class=md-nav__item> <a href=#linteado class=md-nav__link> Linteado </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#desarrollando-implementaciones class=md-nav__link> Desarrollando implementaciones </a> <nav class=md-nav aria-label="Desarrollando implementaciones"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#argumentos-de-implementacion class=md-nav__link> Argumentos de implementación </a> </li> <li class=md-nav__item> <a href=#singularidades-de-metodos class=md-nav__link> Singularidades de métodos </a> <nav class=md-nav aria-label="Singularidades de métodos"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#post class=md-nav__link> POST </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#comportamiento-de-envoltura-en-una-linea class=md-nav__link> Comportamiento de envoltura en una línea </a> </li> <li class=md-nav__item> <a href=#aleatorizando-valores class=md-nav__link> Aleatorizando valores </a> </li> <li class=md-nav__item> <a href=#utilidades-de-lenguajeplataforma class=md-nav__link> Utilidades de lenguaje/plataforma </a> </li> <li class=md-nav__item> <a href=#creando-casos-de-tests class=md-nav__link> Creando casos de tests </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Desarrollo</h1> <h2 id=preparacion-de-entorno-de-desarrollo>Preparación de entorno de desarrollo<a class=headerlink href=#preparacion-de-entorno-de-desarrollo title="Link permanente">&para;</a></h2> <div class=tabbed-set data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>Linux/MacOS</label><div class=tabbed-content> <div class=tabbed-set data-tabs=2:1><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><label for=__tabbed_2_1>pip + virtualenv</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>git<span class=w> </span>clone<span class=w> </span>https://github.com/mondeja/http-request-codegen.git
python3<span class=w> </span>-m<span class=w> </span>virtualenv<span class=w> </span>venv
.<span class=w> </span>venv/bin/activate
python3<span class=w> </span>-m<span class=w> </span>pip<span class=w> </span>install<span class=w> </span>.<span class=o>[</span>dev<span class=o>]</span>
pre-commit<span class=w> </span>install
</code></pre></div> </div> </div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>Windows</label><div class=tabbed-content> <div class=tabbed-set data-tabs=3:1><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><label for=__tabbed_3_1>pip + virtualenv</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>git clone https://github.com/mondeja/http-request-codegen.git
python3 -m virtualenv venv
venv\Scripts\activate.bat
python3 -m pip install .[dev]
pre-commit install
</code></pre></div> </div> </div> </div> </div> <h2 id=comandos-de-desarrollo>Comandos de desarrollo<a class=headerlink href=#comandos-de-desarrollo title="Link permanente">&para;</a></h2> <h3 id=testeo>Testeo<a class=headerlink href=#testeo title="Link permanente">&para;</a></h3> <div class=tabbed-set data-tabs=4:3><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><label for=__tabbed_4_1>All</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>pytest<span class=w> </span>-sv
</code></pre></div> </div> <input id=__tabbed_4_2 name=__tabbed_4 type=radio><label for=__tabbed_4_2>Coverage</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>pytest<span class=w> </span>-s<span class=w> </span>--cov<span class=o>=</span>http_request_codegen<span class=w> </span>--cov-config<span class=o>=</span>setup.cfg<span class=w> </span>--cov-report<span class=o>=</span>html
</code></pre></div> </div> <input id=__tabbed_4_3 name=__tabbed_4 type=radio><label for=__tabbed_4_3>Doctests</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>pytest<span class=w> </span>-svv<span class=w> </span>--doctest-modules<span class=w> </span>http_request_codegen
</code></pre></div> </div> </div> <h3 id=linteado>Linteado<a class=headerlink href=#linteado title="Link permanente">&para;</a></h3> <div class=highlight><pre><span></span><code>pre-commit<span class=w> </span>run<span class=w> </span>--all-files
</code></pre></div> <h2 id=desarrollando-implementaciones>Desarrollando implementaciones<a class=headerlink href=#desarrollando-implementaciones title="Link permanente">&para;</a></h2> <p>Para desarrollar una función de un método HTTP para una bilbioteca o un programa, necesitas tener en cuenta todos los parámetros descritos en la función <a href=/reference#generate_http_request_code><code>generate_http_request_code</code></a>, pero no los valores aleatorios pasados en el argumento <code>parameters</code> ya que <code>http_request_codegen</code> provee funciones que pueden manejarlos.</p> <h3 id=argumentos-de-implementacion>Argumentos de implementación<a class=headerlink href=#argumentos-de-implementacion title="Link permanente">&para;</a></h3> <p>Cada función de implementación debe contener los siguientes argumentos, que son pasados de la función de la API <a href=/reference#generate_http_request_code><code>generate_http_request_code</code></a>, por lo que se recomienda que te familiarices con los argumentos de esa función antes de continuar con esta guía porque están bien documentados ahí:</p> <ul> <li><strong><code>url</code></strong>: único agumento posicional de la función, representa la URL objetivo de la petición.</li> <li><strong><code>headers</code></strong>: diccionario de encabezados.</li> <li><strong><code>parameters</code></strong>: lista de objetos de datos de parámetros.</li> <li><strong><code>files</code></strong>: diccionario de archivos, sólo pasados a peticiones POST, por lo que esta argumento no debe ser definido si el nombre de la función de implementación es diferente a <code>post</code>.</li> <li><strong><code>wrap</code></strong>: ancho máximo del trozo de código renderizado.</li> <li><strong><code>indent</code></strong>: indentación usada en el trozo de código generado.</li> <li><strong><code>quote_char</code></strong>: caracter de limitación de cadenas.</li> <li><strong><code>setup</code></strong> : trozo de código colocado al principio de la petición generada.</li> <li><strong><code>teardown</code></strong> : trozo de código colocado al final de la petición generada.</li> <li><strong><code>oneline</code></strong>: si se habilita, la renderización del trozo de código se hará en una línea.</li> <li><strong><code>seed</code></strong>: semilla usada generando los valores aleatorios falsos de los parámetros.</li> <li><strong><code>locale</code></strong>: idioma usado por la biblioteca <a href=https://faker.readthedocs.io>faker</a> para localizar los valores aleatorios falseados para los parámetros.</li> </ul> <h3 id=singularidades-de-metodos>Singularidades de métodos<a class=headerlink href=#singularidades-de-metodos title="Link permanente">&para;</a></h3> <h4 id=post>POST<a class=headerlink href=#post title="Link permanente">&para;</a></h4> <pre><code>    Most POST methods implementations render their code snippets different,
    depending on *Content-Types* header, including by default some of the
    most used *Content-Types* header related behaviours:

    - The default behavior, even if you don't specify it explicitly in the
        *Content-Type* header is the generation of an
        `application/x-www-form-urlencoded` encoded request.
    - If you want to generate a ``multipart/form-data`` encoded request,
        you need to specify the files to sent using the ``files`` argument.
    - If you specifies the *Content-Type* header `application/json`, the
        parameters sent will be adjusted according to the JSON encoded POST
        request.
    - If you specifies the *Content-Type* header `text/plain`, you can only
        send one parameter and it will be adjusted accordingly following
        the implementation.
</code></pre> <h3 id=comportamiento-de-envoltura-en-una-linea>Comportamiento de envoltura en una línea<a class=headerlink href=#comportamiento-de-envoltura-en-una-linea title="Link permanente">&para;</a></h3> <p>La primera cosa a tener en cuenta (y la más complicada) es el comportamiento de envoltura (argumento <code>wrap</code>) renderizando como si <code>oneline=True</code> fuera pasado. La pregunta es: ¿puede un trozo de código ser renderizado en una línea si el largo estimado de la petición es menor que el valor del argumento <code>wrap</code>?</p> <p>Por ejemplo, peticiones con la biblioteca requests de Python pueden ser renderizadas usando este tipo de código, en una línea:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>requests</span>

<span class=n>req</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;https://github.com/mondeja/http-request-codegen&#39;</span><span class=p>)</span>
</code></pre></div> <p>...o usando múltiples líneas (<code>wrap</code> es menor que el largo esperado):</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>requests</span>

<span class=n>req</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
  <span class=s1>&#39;https://github.com/mondeja/http-request-codegen&#39;</span>
<span class=p>)</span>
</code></pre></div> <p>Por supuesto, esto también afecta a los argumentos <code>parameters</code>, <code>headers</code> y <code>kwargs</code>:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>requests</span>

<span class=n>req</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>params</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>},</span> <span class=n>headers</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>})</span>
</code></pre></div> <p>...los cuales pueden ser renderizados en múltiples líneas:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>requests</span>

<span class=n>req</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
    <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
    <span class=n>params</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>},</span>
    <span class=n>headers</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>}</span>
<span class=p>)</span>
</code></pre></div> <p>Ya que este comportamiento puede depender tanto de los argumentos <code>oneline</code> y <code>wrap</code>, la forma recomendada de implementar esto es calcular el largo de la petición esperada dentro del trozo de código y, si es mayor o igual al argumento <code>wrap</code>, debe ser renderizada como si <code>oneline=True</code>.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Puedes ver un ejemplo de este tipo de implementación en la función <code>http_request_codegen.generators.python.requests::get</code>.</p> </div> <p>Pero otras implementaciones podrían ser renderizadas en múltiples líneas sin importar el valor del argumento <code>wrap</code>.</p> <p>Por ejemplo, la implementación de la API fetch de Javascript siempre renderizará un trozo de código multilínea (a no ser que <code>oneline=True</code> sea explícitamente definido), ya que la escritura de promesas Javascript en una sóla línea no es una sintaxis común y hay muy poco margen para que la petición generada pudiera no tener que ser evuelta dado el valor de envolura por defecto (80 en este caso). El trozo de código mínimo razonable en una línea para la implementación fetch de la API Javascript sería:</p> <div class=highlight><pre><span></span><code><span class=nx>fetch</span><span class=p>(</span><span class=s1>&#39;localhost&#39;</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>response</span><span class=p>)</span><span class=w> </span><span class=p>{}).</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>error</span><span class=p>)});</span>
</code></pre></div> <p>...lo cual excede el valor por defecto del argumento <code>wrap</code> (80). En este tipo de casos, no hay necesidad de calcular el largo de el trozo de código de la petición antes de construir la salida.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Puedes ver un ejemplo de este tipo de implementación en la función <code>http_request_codegen.generators.javascript.fetch::get</code>.</p> </div> <p>En el primer caso, necesitas iterar por los argumentos <code>parameters</code>, <code>headers</code> y <code>kwargs</code> para calcular el largo esperado, entonces comparar el largo esperado con el valor del argumento <code>wrap</code> y, si lo alcanza, definir una variable interna para el comportamiento <code>oneline=True</code>. En el segundo, puedes asumir que el código generado es multilínea a no ser que <code>oneline=True</code> sea definido explícitamente como argumento.</p> <h3 id=aleatorizando-valores>Aleatorizando valores<a class=headerlink href=#aleatorizando-valores title="Link permanente">&para;</a></h3> <p>La biblioteca provee las funciones <a href=/reference#lazy_name_by_parameter><code>lazy_name_by_parameter</code></a> y <a href=/reference#lazy_value_by_parameter><code>lazy_value_by_parameter</code></a> las cuales retornan el nombre el valor de un parámetro dada un diccionario de especificación de parámetro. Estos deben ser usados para aleatorizar parámetros de una forma unificada entre implementaciones como se describe en la documentación de la función <a href=/reference#generate_http_request_code><code>generate_http_request_code</code></a>.</p> <h3 id=utilidades-de-lenguajeplataforma>Utilidades de lenguaje/plataforma<a class=headerlink href=#utilidades-de-lenguajeplataforma title="Link permanente">&para;</a></h3> <p>Puedes crear un módulo <code>_utils.py</code> dentro de un paquete de lenguaje o plataforma para almacenar utilidades que puedan ayudar en el proceso de construcción del trozo de código, como:</p> <ul> <li>Definir la indentación por defecto para el lenguaje/plataforma (argumento <code>indent</code>).</li> <li>Definir el valor por defecto de envoltura (argumento <code>wrap</code>).</li> <li>Definir los caracteres de delimitación de cadenas (argumento <code>quote_char</code>).</li> <li>Escapar delimitadores de cadenas de valores (de acuerdo al argumento <code>quote_char</code> dado).</li> <li>Crear funciones de más alto nivel de generación de código para el lenguaje/plataforma, como definiciones de cadenas de comportamientos de envoltura, definiciones de diccionarios...</li> </ul> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Ver los módulos <code>_utils.py</code> actuales de los paquetes de <code>generators</code> como referencia.</p> </div> <h3 id=creando-casos-de-tests>Creando casos de tests<a class=headerlink href=#creando-casos-de-tests title="Link permanente">&para;</a></h3> <p>Usa el script <code>scripts/create-impl-test-cases.py</code> para crear casos posibles de generación de trozos de código de acuerdo a combinaciones de argumentos. Esto te ayudará desarrollando implementaciones ya que te ahorra la necesidad de ejecutar cada posible combinación de argumentos. Úsalo tal como sigue:</p> <div class=highlight><pre><span></span><code>rm<span class=w> </span>-rf<span class=w> </span>cases<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>python3<span class=w> </span>scripts/create-impl-test-cases.py<span class=w> </span><span class=se>\</span>
<span class=w>  </span>--language<span class=w> </span>python<span class=w> </span><span class=se>\</span>
<span class=w>  </span>--implementation<span class=w> </span>requests<span class=w> </span><span class=se>\</span>
<span class=w>  </span>--method<span class=w> </span>GET<span class=w> </span><span class=se>\</span>
<span class=w>  </span>--directory<span class=w> </span>cases
</code></pre></div> <p>El comando previo creará un directorio <code>cases/</code> con un montón de trozos de código generados, dadas las combinaciones descritas en <code>tests/combinations.py</code>.</p> <p>Cuando hayas revisado manualmente que todos los trozos de código son generados correctamente, puedes crear un test para la implementación en <code>tests/test_generators/test_&lt;lang&gt;/test_&lt;impl&gt;/test_&lt;impl&gt;.py</code>, colocando el directorio <code>cases/</code> en <code>tests/test_generators/test_&lt;lang&gt;/test_&lt;impl&gt;/&lt;METHOD&gt;</code>.</p> <p>Por ejemplo, para el método GET de la biblioteca requests de Python, el módulo de test estaría en <code>tests/test_generators/test_python/test_requests/test_requests.py</code> y el directorio <code>cases/</code> estaría emplazado en <code>tests/test_generators/test_python/test_requests/GET/</code>.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Puedes usar un módulo de test ya implementado como referencia escribiendo uno para la implementación.</p> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2020-2023 Álvaro Mondéjar </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.12658920.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script> <script src=../../assets/javascripts/bundle.5cf534bf.min.js></script> </body> </html>